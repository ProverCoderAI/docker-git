services:
  dg-effect-template:
    build: .
    container_name: dg-effect-template
    environment:
      REPO_URL: "https://github.com/ProverCoderAI/effect-template"
      REPO_REF: "main"
      FORK_REPO_URL: ""
      TARGET_DIR: "/effect-template"
      CODEX_HOME: "/home/dev/.codex"
    env_file:
      - ./.orch/env/global.env
      - ./.orch/env/project.env
    ports:
      - "127.0.0.1:2224:22"
    volumes:
      - dg-effect-template-home:/home/dev
      - ./authorized_keys:/authorized_keys:ro
      - ./.orch/auth/codex:/home/dev/.codex
      - /var/run/docker.sock:/var/run/docker.sock
    networks:
      - dg-effect-template-net

networks:
  dg-effect-template-net:
    driver: bridge

volumes:
  dg-effect-template-home:
